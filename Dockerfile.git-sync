FROM alpine:3.19

RUN apk add --no-cache git ca-certificates tzdata

WORKDIR /app
COPY scripts/auto-sync.sh /usr/local/bin/auto-sync.sh
RUN chmod +x /usr/local/bin/auto-sync.sh

ENV HOME=/home/gwiki
ENV REPO_DIR=/notes
ENV COMMIT_MESSAGE=auto:\ notes
ENV MAIN_BRANCH=master
ENV PUSH_BRANCH=gwiki
ENV GIT_CONFIG_GLOBAL=/home/gwiki/.gitconfig
ENV GIT_CREDENTIALS_FILE=/home/gwiki/.git-credentials

CMD ["sleep", "infinity"]
