{{define "view"}}
<div class="view-shell relative min-h-screen overflow-hidden">
  <div class="pointer-events-none absolute inset-0 bg-[radial-gradient(circle_at_top,_rgba(56,189,248,0.15),_transparent_55%),radial-gradient(circle_at_bottom,_rgba(16,185,129,0.12),_transparent_60%)]"></div>
  <div class="relative mx-auto flex min-h-screen max-w-6xl gap-8 px-6 py-10">
    <aside class="w-72 shrink-0 space-y-6 rounded-3xl border border-slate-800 bg-slate-900/60 p-5 shadow-[0_25px_80px_-50px_rgba(0,0,0,0.9)] backdrop-blur">
      <form action="/search" method="get">
        <div class="flex items-center gap-2 rounded-full border border-slate-700 bg-slate-900 px-3 py-2 text-sm text-slate-300">
          <svg class="h-4 w-4 text-slate-500" viewBox="0 0 20 20" fill="none" stroke="currentColor" stroke-width="1.5">
            <circle cx="9" cy="9" r="6"></circle>
            <path d="M14 14l4 4"></path>
          </svg>
          <input class="w-full bg-transparent text-sm text-slate-200 placeholder:text-slate-500 focus:outline-none" type="search" name="q" placeholder="Search memos..." value="{{.SearchQuery}}">
          <svg class="h-4 w-4 text-slate-600" viewBox="0 0 20 20" fill="none" stroke="currentColor" stroke-width="1.5">
            <path d="M6 6h8M8 10h4M9 14h2"></path>
          </svg>
        </div>
      </form>

      <div>
        <div class="flex items-center justify-between text-xs uppercase tracking-[0.3em] text-slate-500">
          <span>{{.CalendarMonth.Label}}</span>
          <span class="flex items-center gap-2 text-slate-600">
            <span class="rounded-full border border-slate-700 px-2 py-0.5">&lt;</span>
            <span class="rounded-full border border-slate-700 px-2 py-0.5">&gt;</span>
          </span>
        </div>
        <div class="mt-3 grid grid-cols-7 gap-1 text-[10px] uppercase tracking-[0.2em] text-slate-600">
          <span class="text-center">Sun</span>
          <span class="text-center">Mon</span>
          <span class="text-center">Tue</span>
          <span class="text-center">Wed</span>
          <span class="text-center">Thu</span>
          <span class="text-center">Fri</span>
          <span class="text-center">Sat</span>
        </div>
        <div class="mt-2 grid grid-cols-7 gap-1 text-xs">
          {{range .CalendarMonth.Weeks}}
            {{range .Days}}
              <div class="flex h-7 w-7 items-center justify-center rounded-md {{if .HasUpdates}}bg-slate-700 text-slate-100{{else if .InMonth}}text-slate-300{{else}}text-slate-600{{end}}">
                {{.Day}}
              </div>
            {{end}}
          {{end}}
        </div>
      </div>

      <div>
        <div class="flex items-center justify-between text-xs uppercase tracking-[0.25em] text-slate-500">
          <span>Shortcuts</span>
          <span class="text-slate-600">+</span>
        </div>
        <ul class="mt-3 space-y-2 text-sm">
          {{range .RecentNotes}}
            <li>
              <a class="text-slate-300 transition hover:text-slate-100" href="/notes/{{.Path}}">{{if .Title}}{{.Title}}{{else}}{{.Path}}{{end}}</a>
            </li>
          {{else}}
            <li class="text-slate-500">No shortcuts yet.</li>
          {{end}}
        </ul>
      </div>

      <div>
        <div class="flex items-center justify-between text-xs uppercase tracking-[0.25em] text-slate-500">
          <span>Tags</span>
          <span class="text-slate-600">.</span>
        </div>
        <div class="mt-3 flex flex-wrap gap-2 text-xs">
          {{range .Tags}}
            <span class="rounded-full border border-slate-700 px-2.5 py-1 text-slate-300">#{{.Name}} ({{.Count}})</span>
          {{else}}
            <span class="text-slate-500">No tags yet.</span>
          {{end}}
        </div>
      </div>
    </aside>

    <section class="flex-1 space-y-6">
      <div class="rounded-3xl border border-slate-800 bg-slate-900/60 p-4 shadow-[0_25px_80px_-50px_rgba(0,0,0,0.9)]">
        <div class="text-sm text-slate-500">Any thoughts...</div>
        <div class="mt-4 flex items-center justify-between">
          <button class="rounded-xl border border-slate-700 bg-slate-800 p-2 text-slate-200 transition hover:border-slate-500" type="button">+</button>
          <div class="flex items-center gap-3 text-xs text-slate-500">
            <span class="flex items-center gap-1">
              <svg class="h-4 w-4" viewBox="0 0 20 20" fill="none" stroke="currentColor" stroke-width="1.5">
                <path d="M6 9V7a4 4 0 118 0v2"></path>
                <rect x="4" y="9" width="12" height="8" rx="2"></rect>
              </svg>
              Private
            </span>
            <button class="rounded-xl bg-slate-700 px-4 py-1.5 text-sm text-slate-100 transition hover:bg-slate-600" type="button">Save</button>
          </div>
        </div>
      </div>

      <article class="rounded-3xl border border-slate-800 bg-slate-900/60 p-6 shadow-[0_25px_80px_-50px_rgba(0,0,0,0.9)]">
        <div class="flex items-center justify-between text-xs uppercase tracking-[0.2em] text-slate-500">
          <span>Memo</span>
          <a class="text-slate-400 transition hover:text-slate-200" href="/notes/{{.NotePath}}/edit">Edit</a>
        </div>
        <h1 class="mt-3 text-2xl font-semibold text-slate-100">{{if .NoteTitle}}{{.NoteTitle}}{{else}}{{.NotePath}}{{end}}</h1>
        <div class="note-body mt-4 text-sm leading-relaxed text-slate-200">
          {{template "note_content" .}}
        </div>
      </article>

      <div class="grid gap-4">
        {{range $index, $note := .RecentNotes}}
          {{if lt $index 2}}
            <div class="rounded-2xl border border-slate-800 bg-slate-900/50 p-4 text-sm shadow-[0_20px_60px_-50px_rgba(0,0,0,0.8)]">
              <div class="text-xs uppercase tracking-[0.2em] text-slate-500">Recent</div>
              <div class="mt-2 text-lg font-semibold text-slate-100">{{if $note.Title}}{{$note.Title}}{{else}}{{$note.Path}}{{end}}</div>
              <a class="mt-3 inline-block text-slate-400 transition hover:text-slate-200" href="/notes/{{$note.Path}}">Open note</a>
            </div>
          {{end}}
        {{else}}
          <div class="rounded-2xl border border-slate-800 bg-slate-900/50 p-4 text-sm text-slate-500">
            No recent notes yet.
          </div>
        {{end}}
      </div>
    </section>
  </div>
</div>
{{end}}
