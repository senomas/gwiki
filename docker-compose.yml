services:
  gwiki:
    image: docker.senomas.com/gwiki:latest
    ports:
      - "8080:8080"
    volumes:
      - "${WIKI_REPO_PATH_HOST:-.}:/notes"
      - "${WIKI_DATA_PATH_HOST:-./.wiki}:/data"
      - "${GIT_HOME_HOST:-./git-home}:/git-home"
    user: "${UID:-1000}:${GID:-1000}"
    environment:
      - HOME=/home/gwiki
      - GIT_CONFIG_GLOBAL=/git-home/.gitconfig
      - WIKI_REPO_PATH=/notes
      - WIKI_DATA_PATH=/data
      - TZ=${TZ:-Asia/Jakarta}
    labels:
      ofelia.enabled: "true"
      ofelia.job-exec.sync.schedule: "@every 15m"
      ofelia.job-exec.sync.command: "/usr/local/bin/sync"
  ofelia:
    image: mcuadros/ofelia:latest
    command: daemon --docker
    volumes:
      - /var/run/docker.sock:/var/run/docker.sock:ro
